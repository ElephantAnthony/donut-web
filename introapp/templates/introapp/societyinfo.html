<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../../static/css/societyinfo.css">
    <link rel="stylesheet" href="../../../static/SASS/societyinfo.scss">
</head>
<script>
    function CheckForm(Join){
        let Checkboxchecked = false;
        const region_array = document.getElementsByName("region[]");
        for(let i=0; i<region_array.length; i++){
            if(region_array[i].checked == true) {
                Checkboxchecked = true;
                break;
            }
        }

        if(!Checkboxchecked){
            alert("지역을 선택해주세요");
            return false;
        }

    }
</script>
<body>
<div id="wrap">
    <div id="contents" class="customer">
        <!-- Donut 상단 로고 -->
        <h1 id="top_logo">
            <img src="../../../static/img/donut.png" alt="">
            <a href="{% url 'introapp:home' %}">Donut</a>
        </h1>

        <!-- 페이지 소개 -->

        <div id="nav">
            <div class="inner_cont customer_cont">
                <div class="section section-top">
                    <div class="inner">
                        <h3>단체 소개</h3>
                        <div class="line pink"></div>
                        <h4>협력 후원 단체</h4>
                        <div class="blank_line"></div>
                        <p>
                            Donut에 방문해 주셔서 감사합니다.
                        </p>
                    </div>
                </div>
            </div>


            <div class = "region_filter" style="text-align: center; margin-left: 10rem;">
                <div class="checkbox_filter" style="border: 0.1rem solid black; margin: 0; padding: 0; positon: relative;width: 20rem; height: 22rem;">
                    <form method="POST" id="checkbox_filter_id" name="checkbox_organization" action="{% url 'introapp:societyinfo' %}" onSubmit="return CheckForm(this)" style="display: flex;position: relative; width: 20rem;height: 20rem; border-bottom: 0.1rem solid black; margin: 0; padding: 0;">
                        {% csrf_token %}

                        <div class="region_eup" style="display: flex;flex-direction: column;padding: 0rem;width: 7rem;height: 20rem;">
                            <h4>읍</h4>

                            <label for="eup1" style="cursor:pointer"><input type="checkbox" name="region[]" id="eup1" value="조치원읍"/> 조치원읍</label>
                        </div>

                        <div class="region_dong" style="display: flex;flex-direction: column;padding: 0rem;width: 7rem;height: 20rem;">
                            <h4>면</h4>

                            <label for="myeon1" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon1" value="연기면"/> 연기면</label>

                            <label for="myeon2" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon2" value="연동면"/> 연동면</label>

                            <label for="myeon3" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon3" value="부강면" style="display: none;"/> 부강면</label>

                            <label for="myeon4" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon4" value="금남면" style="display: none;"/> 금남면</label>

                            <label for="myeon5" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon5" value="장군면" style="display: none;"/> 장군면</label>

                            <label for="myeon6" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon6" value="연서면" style="display: none;"/> 연서면</label>

                            <label for="myeon7" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon7" value="전의면" style="display: none;"/> 전의면</label>

                            <label for="myeon8" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon8" value="전동면" style="display: none;"/> 전동면</label>

                            <label for="myeon9" style="cursor:pointer"><input type="checkbox" name="region[]" id="myeon9" value="소정면" style="display: none;"/> 소정면</label>
                        </div>

                        <div class="region_dong" style="display: flex;flex-direction: column;padding: 0rem;width: 7rem;height: 20rem;">
                            <h4>동</h4>

                            <label for="dong1" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong1" value="한솔동" style="display: none;"/> 한솔동</label>

                            <label for="dong2" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong2" value="도담동" style="display: none;"/> 도담동</label>

                            <label for="dong3" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong3" value="아름동" style="display: none;"/> 아름동</label>

                            <label for="dong4" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong4" value="종촌동" style="display: none;"/> 종촌동</label>

                            <label for="dong5" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong5" value="고운동" style="display: none;"/> 고운동</label>

                            <label for="dong6" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong6" value="보람동" style="display: none;"/> 보람동</label>

                            <label for="dong7" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong7" value="새롬동" style="display: none;"/> 새롬동</label>

                            <label for="dong8" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong8" value="대평동" style="display: none;"/> 대평동</label>

                            <label for="dong9" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong9" value="소담동" style="display: none;"/> 소담동</label>

                            <label for="dong10" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong10" value="다정동" style="display: none;"/> 다정동</label>

                            <label for="dong11" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong11" value="해밀동" style="display: none;"/> 해밀동</label>

                            <label for="dong12" style="cursor:pointer" class = "on"><input type="checkbox" name="region[]" id="dong12" value="반곡동" style="display: none;"/> 반곡동</label>

                        </div>
                    </form>

                    <div class = "btn-group" style="border: 0;margin: 0; height: 2rem;">
                        <input type="submit" form="checkbox_filter_id" style="margin-top:0.2rem;border: none;"class="btn btn-dark rounded-pill">

                        <input type="reset" style="margin-top:0.2rem;border: none;" class="btn btn-white rounded-pill">
                    </div>
                </div>
            </div>

            {% for result in matchingresult %}

            <h2> {{ result.society }}</h2>

            {% endfor %}

             <div id="map" style="width:500px;height:400px;">
                <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3484f791cc128fd4a942d09c56cd52e5"></script>
                <script>
                    var container = document.getElementById('map');
                    var options = {
                        center: new kakao.maps.LatLng(36.483322, 127.261818),
                        level: 3
                    };

                    var map = new kakao.maps.Map(container, options);

                    var positions = new Array();

                    {% for result in matchingresult %}
                        latlng = new kakao.maps.LatLng({{result.latitude}}, {{result.longitude}});
                        positions.push({title: '{{result.society}}', latlng: latlng})
                        console.log('{{result.society}}')
                    {% endfor %}

                    var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

                    for (var i = 0; i < positions.length; i ++) {

                        var imageSize = new kakao.maps.Size(24, 35);

                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

                        var marker = new kakao.maps.Marker({
                            map: map, // 마커를 표시할 지도
                            position: positions[i].latlng, // 마커를 표시할 위치
                            title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀 표시
                            image : markerImage // 마커 이미지
                        });
                    }
                </script>
            </div>
        </div>
    </div>

    <div id="footer">
        <address>
            <em><a href="{% url 'introapp:home' %}" class="logo"><span class="blind"></span></a></em>
            <em class="copy">고려대학교 세종캠퍼스</em>
            <em class="u_cri">©</em>
            <a href="{% url 'introapp:home' %}" class="u_cra">Donut</a>
        </address>
    </div>
</div>
</body>
</html>