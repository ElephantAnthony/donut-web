<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Donut</title>
    <link rel="stylesheet" href="../../../static/css/home.css">
    <link rel="stylesheet" href="../../../static/SASS/home.scss">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script language="JavaScript">
        $(document).ready(function() {
            var $banner = $(".banner").find("ul");

            var $bannerWidth = $banner.children().outerWidth();
            var $bannerHeight = $banner.children().outerHeight();
            var $bannerLength = $banner.children().length;
            var rollingId;

            rollingId = setInterval(function() { rollingStart(); });

            function rollingStart() {
                $banner.css("width", $bannerWidth * $bannerLength + "px");
                $banner.css("height", $bannerHeight + "px");
                $banner.animate({left: - $bannerWidth + "px"}, 2000, function() {
                    $(this).append("<li>" + $(this).find("li:first").html() + "</li>");
                    $(this).find("li:first").remove();
                    $(this).css("left", 0);
                });
            }
        });
    </script>

    <script>
        $(".animated-progress span").each(function () {
            $(this).animate({
                width: $(this).attr("data-progress") + "%",
            }, 1000);
            $(this).text($(this).attr("data-progress")+"%");
        });
    </script>

    <script>
        $(document).ready(function () {
            var currentPosition = parseInt($(".pro_container").css("top"));
            $(window).scroll(function () {
                var position = $(window).scrollTop();
                $(".pro_container").stop().animate({"top":position+currentPosition+"px"});
            });
        });
    </script>
</head>
<body>
<div class="wrapper">
    <div class="topmenu_wrapper">
        <h1 id="top_logo">
            <img src="../../../static/img/donut.png" alt="">
            <a href="{% url 'introapp:home' %}">Donut</a>
        </h1>

        <ul id="top_nav">
            {% if not user.is_authenticated %}
            <li class="list1">
                <a href="{% url 'accountapp:login' %}">로그인</a>
            </li>
            <li class="list2">
                <a href="{% url 'accountapp:create' %}">회원가입</a>
            </li>
            <li class="list3">
                <a href="{% url 'articleapp:list' %}">공구모집</a>
            </li>
            <li class="list4">
                <a href="{% url 'introapp:societyinfo' %}">단체소개</a>
            </li>
            {% else %}
            <li class="list1">
                <a href="{% url 'accountapp:detail' pk=user.pk %}">마이페이지</a>
            </li>
            <li class="list2">
                <a href="{% url 'accountapp:logout' %}?next={{ request.path }}">로그아웃</a>
            </li>
            <li class="list3">
                <a href="{% url 'articleapp:list' %}">공구모집</a>
            </li>
            <li class="list4">
                <a href="{% url 'introapp:societyinfo' %}">단체소개</a>
            </li>
            {% endif %}
        </ul>
    </div>

    <div class="box">
        <div class="wave -one"></div>
        <div class="wave -two"></div>
        <div class="wave -three"></div>
        <div class="title1">가장 투명한 기부</div>
        <div class="title2">Donut</div>
    </div>

    <div class="pro_container">
        <ul>
            <li>
                진행 중인 캠페인
                <div class="pro_title">
                    {% if campaign_title %}
                    {{ campaign_title }}
                    {% endif %}
                </div>
                <div class="progress2 progress-moved">
                    <div class="progress-bar2">
                        <!-- 진행 정도는 home.css 386, 393번째 줄 width를 통해 조절할 수 있습니다 -->
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <div class="banner_top">
        {% if popular_article %}
        <div class="banner">
            <div class="banner_title">
                인기 게시글
            </div>
            <ul>
                {% for each in popular_article %}
                <li>
                    <hr>
                    <a href="{% url 'articleapp:detail' each.id %}">
                        <img src="../../../static/img/fire.png">
                        <h2>{{each.title}}</h2>
                    </a>
                    <hr>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
</div>
<div id="footer">
    <address>
        <em class="copy">고려대학교 세종캠퍼스 </em>
        <em class="u_cri">©</em>
        <a href="{% url 'introapp:home' %}" class="u_cra">Donut</a>
    </address>
</div>
</body>
</html>